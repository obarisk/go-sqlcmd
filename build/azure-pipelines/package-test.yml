parameters:
- name: OS
  type: string
  default:
- name: Type
  type: string

steps:
- task: DownloadPipelineArtifact@2
  inputs:
    buildType: 'current'
    targetPath: '$(Pipeline.Workspace)'
- task: CmdLine@2
  displayName: 'Test ${{ parameters.OS }}/${{ parameters.Type }} distribution'
  inputs:
    script: release/${{ parameters.OS }}/${{ parameters.Type }}/pipeline-test.sh
    workingDirectory: $(Build.SourcesCliDirectory)
  env:
    BUILD_STAGINGDIRECTORY: $(Build.ArtifactStagingDirectory)